<nav class="d-flex justify-content-between">
  <br />
  <div class="filters d-flex mt-4" style="gap: 15px">
    <form class="search">
      <span class="align-centre" style="height: 40px">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="search-icon"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="m21 21l-4.343-4.343m0 0A8 8 0 1 0 5.343 5.343a8 8 0 0 0 11.314 11.314"
          />
        </svg>
        <input
          type="text"
          autocomplete="off"
          [(ngModel)]="searchKey"
          class="search-input"
          [ngModelOptions]="{ standalone: true }"
          (keyup)="onkeypress($event)"
          placeholder="Search Client, Our Ref, Title Number, Address, Postcode, Buyer 1 name..."
        />
        <div class="icon-bg">
          <span
            class="material-icons cross-icon"
            (click)="searchKey = null; getMatterListWithPagination()"
            *ngIf="searchKey != null"
          >
            close
          </span>
        </div>
      </span>
    </form>
    <span class="mt-1">
      <p-dropdown
        [options]="matterInstructionType"
        (onChange)="
          getMatterListWithPagination();
          this.investigationTypeValue = null;
          unSelectRadio();
          this.selectedMatterId = null
        "
        [(ngModel)]="matterInstructionTypeId"
        optionValue="id"
        optionLabel="type"
        placeholder="Instruction Type"
        class="w-full md:w-56"
      >
        <ng-template #dropdownicon>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 24 24"
          >
            <path
              fill="#2f4858"
              d="M11.178 19.569a.998.998 0 0 0 1.644 0l9-13A.999.999 0 0 0 21 5H3a1.002 1.002 0 0 0-.822 1.569z"
            />
          </svg>
        </ng-template>
      </p-dropdown>
    </span>
    <span class="mt-1">
      <p-dropdown
        [options]="matterStatus"
        (onChange)="
          getMatterListWithPagination();
          statusTypeValue = null;
          unSelectRadio();
          this.selectedMatterId = null
        "
        [(ngModel)]="matterStatusId"
        optionValue="id"
        optionLabel="type"
        placeholder="Status"
        class="w-full md:w-56"
      >
        <ng-template #dropdownicon>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 24 24"
          >
            <path
              fill="#2f4858"
              d="M11.178 19.569a.998.998 0 0 0 1.644 0l9-13A.999.999 0 0 0 21 5H3a1.002 1.002 0 0 0-.822 1.569z"
            />
          </svg>
        </ng-template>
      </p-dropdown>
    </span>
    <span class="mt-1">
      <p-dropdown
        [options]="tenureType"
        (onChange)="
          getMatterListWithPagination();
          tenureTypeValue = null;
          unSelectRadio();
          this.selectedMatterId = null
        "
        [(ngModel)]="tenureTypeId"
        optionValue="id"
        optionLabel="type"
        placeholder="Tenure"
        class="w-full md:w-56"
      >
        <ng-template #dropdownicon>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 24 24"
          >
            <path
              fill="#2f4858"
              d="M11.178 19.569a.998.998 0 0 0 1.644 0l9-13A.999.999 0 0 0 21 5H3a1.002 1.002 0 0 0-.822 1.569z"
            />
          </svg>
          <!-- <img style="width: 20px;" src="./assets/Images/dropdown.svg" alt=""> -->
        </ng-template>
      </p-dropdown>
    </span>
  </div>
</nav>
<div
  class="text-center d-flex justify-content-end"
  *ngIf="
    (selectedMatterId && investigationTypeValue == 1 && statusTypeValue == 4) ||
    statusTypeValue == 6
  "
>
  <br />

  <div
    class="file-upload-container mt-3"
    style="margin-right: 10px"
    (click)="fileInput.click()"
  >
    <input
      type="file"
      accept=".json,application/json"
      #fileInput
      (change)="onFileSelected($event)"
      hidden
    />
    <p *ngIf="selectedFile; else placeholder">
      Selected File: <strong>{{ selectedFile?.name }}</strong>
    </p>
    <ng-template #placeholder>
      <p class="btn-text mt-3">Click to select a JSON file</p>
    </ng-template>

    <div
      class="errorValdation"
      style="text-align: center"
      *ngIf="errorMessage != ''"
    >
      {{ errorMessage }}
    </div>
  </div>
  <div class="button-group mt-5" *ngIf="selectedFile">
    <!-- Save Button -->
    <button
      (click)="addFreeholdData()"
      [disabled]="!selectedFile"
      class="btn-custom save-btn"
    >
      <i *ngIf="saveLoading" class="fa fa-refresh fa-spin"></i>
      Save
    </button>

    <!-- Cancel Button -->
    <button
      (click)="cancelUpload()"
      class="btn-custom save-btn"
      style="background-color: red !important"
    >
      <i class="fa fa-times"></i>
      Cancel
    </button>
  </div>
</div>
<div class="mt-5" style="margin-top: 10%">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <ng-container matColumnDef="cell0">
      <th
        style="
          background: #2f4858 !important;
          border: 1px solid #2f4858 !important;
        "
        mat-header-cell
        *matHeaderCellDef
      ></th>
      <td mat-cell *matCellDef="let element">
        <div class="radio-group">
          <label>
            <input
              type="radio"
              name="fileType"
              value="{{ element.isSelected }}"
              (change)="checkValues(element)"
            />
            <span></span>
          </label>
        </div>
      </td>
    </ng-container>
    <ng-container matColumnDef="cell1">
      <th
        style="
          background: #2f4858 !important;
          border: 1px solid #2f4858 !important;
        "
        mat-header-cell
        *matHeaderCellDef
      >
        Client
      </th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element.clientRef">
        {{ element.clientRef }}
      </td>
    </ng-container>

    <ng-container matColumnDef="cell2">
      <th
        style="
          background: #2f4858 !important;
          border: 1px solid #2f4858 !important;
        "
        mat-header-cell
        *matHeaderCellDef
      >
        Property address
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        [matTooltip]="element.propertyAdress"
        style="width: 200px"
      >
        {{ element.propertyAdress }}
      </td>
    </ng-container>
    <ng-container matColumnDef="cell3">
      <th
        style="
          background: #2f4858 !important;
          border: 1px solid #2f4858 !important;
        "
        mat-header-cell
        *matHeaderCellDef
      >
        user
      </th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element.nTitleRef">
        {{ element.nTitleRef }}
      </td>
    </ng-container>
    <ng-container matColumnDef="cell4">
      <th
        style="
          background: #2f4858 !important;
          border: 1px solid #2f4858 !important;
          width: 180px;
        "
        mat-header-cell
        *matHeaderCellDef
      >
        Instruction Type
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        [matTooltip]="element.matterInstructionType"
      >
        <span
          style="
            border: 1px solid #d5d5d5;
            border-radius: 10px;
            height: 30px;
            padding: 5px;
          "
        >
          {{ element.matterInstructionType }}</span
        >
      </td>
    </ng-container>
    <ng-container matColumnDef="cell5">
      <th
        style="
          background: #2f4858 !important;
          border: 1px solid #2f4858 !important;
          width: 190px;
        "
        mat-header-cell
        *matHeaderCellDef
      >
        tenure
      </th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element.tenureType">
        <div
          style="
            border: 1px solid;
            border-radius: 10px;
            height: 30px;
            padding: 5px;
          "
          [ngStyle]="{
            'border-color':
              element.tenureId == 1
                ? '#036FEE'
                : element.tenureId == 3
                ? '#67D786'
                : element.tenureId == 4
                ? '#8416C7'
                : '#f95046',
            color:
              element.tenureId == 1
                ? '#036FEE'
                : element.tenureId == 3
                ? '#67D786'
                : element.tenureId == 4
                ? '#8416C7'
                : '#f95046'
          }"
          class="text-center font12-500 overflow-ellipsis tenureType"
        >
          {{ element.tenureType }}
        </div>
      </td>
    </ng-container>
    <ng-container matColumnDef="cell6">
      <th
        style="
          background: #2f4858 !important;
          border: 1px solid #2f4858 !important;
        "
        mat-header-cell
        *matHeaderCellDef
      >
        status
      </th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element.name">
        <div
          class="default-class matterStatus"
          style="padding: 2px 5px"
          [ngClass]="
            element.matterStatusId === 3
              ? 'linear-gradient-Id-1'
              : element.matterStatusId === 4
              ? 'linear-gradient-Id-3'
              : element.matterStatusId === 6
              ? 'linear-gradient-Id-3'
              : element.matterStatusId === 7
              ? 'linear-gradient-Id-5'
              : element.matterStatusId === 8
              ? 'linear-gradient-Id-6'
              : element.matterStatusId === 9
              ? 'linear-gradient-Id-7'
              : element.matterStatusId === 10
              ? 'linear-gradient-Id-4'
              : ''
          "
        >
          {{ element.matterStatus }}
        </div>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
  </table>
  <div *ngIf="loadData" class="d-flex justify-content-center mt-4">
    <div
      class="spinner-border text-success"
      style="width: 3rem; height: 3rem; color: #2f4858 !important"
      role="status"
    >
      <span class="sr-only">Loading...</span>
    </div>
  </div>
  <div>
    <div class="zeroLength mt-3" *ngIf="matterList.length == 0 && !loadData">
      <img
        src="assets/Images/ntitle/matter/Group.png"
        alt="dataNotFound"
        style="height: 15rem"
      />
      <span class="zeroLengthText">Opps: No record found</span>
    </div>
  </div>
</div>
